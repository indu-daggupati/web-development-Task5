/* Minified TechStore JS: products, cart, auth, main */
;(function(){window.Products=function(){const e=[{id:1,name:"Nova X Smartphone",price:799,category:"smartphones",rating:4.6,image:"https://picsum.photos/seed/phone1/640/480"},{id:2,name:"AeroBook Pro 14",price:1299,category:"laptops",rating:4.7,image:"https://picsum.photos/seed/laptop1/640/480"},{id:3,name:"Quantum Buds",price:149,category:"accessories",rating:4.4,image:"https://picsum.photos/seed/earbuds/640/480"},{id:4,name:"HyperPad 11",price:599,category:"accessories",rating:4.5,image:"https://picsum.photos/seed/tablet/640/480"},{id:5,name:"Falcon Gaming Headset",price:119,category:"gaming",rating:4.3,image:"https://picsum.photos/seed/headset/640/480"},{id:6,name:"Vortex Mechanical Keyboard",price:159,category:"gaming",rating:4.6,image:"https://picsum.photos/seed/keyboard/640/480"},{id:7,name:"Photon 65W Charger",price:39,category:"accessories",rating:4.2,image:"https://picsum.photos/seed/charger/640/480"},{id:8,name:"ZenBook Air 13",price:999,category:"laptops",rating:4.5,image:"https://picsum.photos/seed/laptop2/640/480"},{id:9,name:"Aurora Max Smartphone",price:1099,category:"smartphones",rating:4.8,image:"https://picsum.photos/seed/phone2/640/480"},{id:10,name:"Nebula Gaming Mouse",price:59,category:"gaming",rating:4.4,image:"https://picsum.photos/seed/mouse/640/480"},{id:11,name:"Titan Pro 15",price:1599,category:"laptops",rating:4.9,image:"https://picsum.photos/seed/laptop3/640/480"},{id:12,name:"Flux Wireless Charger",price:49,category:"accessories",rating:4.1,image:"https://picsum.photos/seed/wireless/640/480"}];return{all:()=>e.slice(),byCategory:t=>"all"===t?e:e.filter(e=>e.category===t)}}();window.Cart=function(){const e="techstore_cart_v1",t=()=>JSON.parse(localStorage.getItem(e)||"[]"),n=e=>localStorage.setItem(e,JSON.stringify(e));return{read:t,add:e=>{const o=t(),a=o.find(t=>t.id===e.id);return a?a.qty+=1:o.push({...e,qty:1}),n(o),o},remove:e=>{const o=t().filter(t=>t.id!==e);return n(o),o},clear:()=>n([]),total:()=>t().reduce((e,t)=>e+t.price*t.qty,0),count:()=>t().reduce((e,t)=>e+t.qty,0)}}();window.Auth=function(){const e="techstore_user_v1",t=()=>JSON.parse(localStorage.getItem(e)||"null"),n=e=>localStorage.setItem(e,JSON.stringify(e));return{get:t,login:e=>(n({email:e}),t()),logout:()=>localStorage.removeItem(e)}}();(function(){const e=(e,t=document)=>t.querySelector(e),t=(t,n=document)=>Array.from(n.querySelectorAll(t)),n=n=>{const o=e("#toast");e(".toast-message",o).textContent=n,o.classList.add("show"),setTimeout(()=>o.classList.remove("show"),2200)};window.showToast=n,window.addEventListener("load",(()=>{const t=e("#loading-screen");t&&(t.style.display="none")}));const o=e("#back-to-top");window.addEventListener("scroll",(()=>{const e=window.scrollY;o.classList.toggle("show",e>400)})),o.addEventListener("click",(()=>window.scrollTo({top:0,behavior:"smooth"})));const a=e("#nav-toggle"),c=e("#nav-menu");a.addEventListener("click",(()=>c.classList.toggle("show"))),t(".nav-link").forEach((n=>n.addEventListener("click",(o=>{const a=n.getAttribute("href");a&&a.startsWith("#")&&(o.preventDefault(),e(a).scrollIntoView({behavior:"smooth",block:"start"}),t(".nav-link").forEach((e=>e.classList.remove("active"))),n.classList.add("active"),c.classList.remove("show"))}))));const s=8,r=e("#products-grid");let l="all",i=1,d="";const u=t=>{const o=document.createDocumentFragment();t.forEach((t=>{const n=document.createElement("article");n.className="product-card",n.innerHTML=`<div class="product-media"><img src="${t.image}" alt="${t.name}" loading="lazy"></div><div class="product-body"><h3 class="product-title">${t.name}</h3><div class="product-meta"><span>⭐ ${t.rating.toFixed(1)}</span><span class="price">$${t.price.toFixed(2)}</span></div></div><div class="product-actions"><button class="btn btn-outline add-btn" data-id="${t.id}"><i class="fas fa-cart-plus"></i> Add to Cart</button><button class="btn btn-secondary details-btn" data-id="${t.id}">Details</button></div>`,o.appendChild(n)})),r.innerHTML="",r.appendChild(o),m()},p=(e,t,n)=>e.slice(0,t*n),g=()=>{const e=Products.byCategory(l),t=d?e.filter((e=>e.name.toLowerCase().includes(d))):e,o=p(t,i,s);u(o),document.querySelector("#load-more-btn").style.display=o.length<t.length?"inline-flex":"none"};t(".filter-btn").forEach((e=>e.addEventListener("click",(()=>{t(".filter-btn").forEach((e=>e.classList.remove("active"))),e.classList.add("active"),l=e.dataset.filter,i=1,g()})))),document.querySelector("#load-more-btn").addEventListener("click",(()=>{i++,g()}));const h=e("#search-input");document.querySelector("#search-btn").addEventListener("click",(()=>{d=h.value.trim().toLowerCase(),i=1,g()})),h.addEventListener("keydown",(e=>{"Enter"===e.key&&(e.preventDefault(),document.querySelector("#search-btn").click())})),document.querySelector("#shop-now-btn").addEventListener("click",(()=>document.querySelector("#products").scrollIntoView({behavior:"smooth"})));const f=e("#auth-btn"),y=e("#auth-modal"),b=e("#auth-close"),v=e("#auth-form"),w=e("#auth-title"),E=e("#auth-submit"),L=e("#auth-switch-link");let x="login";const S=()=>{const e=Auth.get();if(e){const t=e.email.split("@")[0];f.querySelector("span").textContent=t,f.title="Click to logout"}else f.querySelector("span").textContent="Login",f.removeAttribute("title")};f.addEventListener("click",(()=>{Auth.get()?(Auth.logout(),n("Logged out"),S()):y.classList.add("show")})),b.addEventListener("click",(()=>y.classList.remove("show"))),L.addEventListener("click",(e=>{e.preventDefault(),x="login"===x?"signup":"login",w.textContent="login"===x?"Login":"Sign up",document.querySelector("#confirm-password-group").style.display="signup"===x?"block":"none",E.textContent="login"===x?"Login":"Create Account"})),v.addEventListener("submit",(t=>{t.preventDefault();const o=document.querySelector("#auth-email").value.trim(),a=document.querySelector("#auth-password").value.trim();o&&a?(Auth.login(o),y.classList.remove("show"),n("Welcome to TechStore!"),S()):n("Please fill in all fields")}));const T=e("#cart-btn"),q=e("#cart-modal"),k=e("#cart-close"),A=e("#clear-cart"),B=e("#checkout-btn"),C=e("#cart-items"),D=e("#cart-total"),I=e("#cart-count"),m=()=>{const e=Cart.read();C.innerHTML="",e.length?e.forEach((e=>{const t=document.createElement("div");t.className="cart-item",t.innerHTML=`<img src="${e.image}" alt="${e.name}" width="64" height="48" loading="lazy"><div><div><strong>${e.name}</strong></div><div class="muted">$${e.price.toFixed(2)} × ${e.qty}</div></div><button class="btn btn-outline" data-remove="${e.id}">Remove</button>`,C.appendChild(t)})):C.innerHTML="<p>Your cart is empty.</p>",D.textContent=Cart.total().toFixed(2),I.textContent=Cart.count()};T.addEventListener("click",(()=>{m(),q.classList.add("show")})),k.addEventListener("click",(()=>q.classList.remove("show"))),A.addEventListener("click",(()=>{Cart.clear(),m(),n("Cart cleared")})),C.addEventListener("click",(e=>{const t=e.target.closest("button[data-remove]");t&&(Cart.remove(Number(t.dataset.remove)),m(),n("Removed item"))})),B.addEventListener("click",(()=>{n("Checkout simulated. Thank you!"),Cart.clear(),m()})),S(),g()})();})();
